<%= render 'public/shared/header.html.erb' %>
<div class="container p-3">
  <div class="row">
    <div class="col-12">
      <div>
        <div>ニックネーム</div>
        <div>
          <%= @member.nick_name %>
        </div>
        <div>プロフィール</div>
        <div>
          <%= @member.profile %>
        </div>
        <div>
          <% if params[:id] = current_member.id %>
            <%= link_to edit_member_path(current_member.id) do %>
              <buttun class="btn btn-success">プロフィールを編集する</buttun>
            <% end %>
          <% end %>
        </div>
      </div>
    <div>
      <%= render 'members_bar', member: @member %>
    </div>
    <div>
       <% if @posts.nil? %>
        <div>まだ投稿はありません</div>
      <% else %>
        <% @posts.each do |post| %>
        <div>
          <div>
            <%= image_tag post.image, size: "200x200" %>
          </div>
          <div>
            <%= link_to post.post_text, post_path(post.id) %>
          </div>
          <div>
            <% if post.post_favorited_by?(current_member) %>
              <%= link_to post_post_favorite_path(post), method: :delete do %>
                <i class="fas fa-heart" aria-hidden="true" style="color: red;"></i>
                <%= post.post_favorites.count %> いいね
              <% end %>
            <% else %>
              <%= link_to post_post_favorites_path(post), method: :post do %>
                <i class="fas fa-heart" aria-hidden="true"></i>
                <%= post.post_favorites.count %> いいね
              <% end %>
            <% end %>
          </div>
          <div>
            <p>コメント件数：<%= post.post_comments.count %></p>
            <% post.post_comments.each do |post_comment| %>
              <p><%#= image_tag post_comment.member.get_profile_image(100,100) %></p>
              <%= post_comment.member.nick_name %>
              <%= post_comment.created_at.strftime('%Y/%m/%d') %>
              <%= link_to post_comment_path(post_comment) do %>
                <%= post_comment.comment %>
              <% end %>
            <% end %>
          </div>
          <div>
            <%= form_with model: [@post, @post_comment] do |f| %>
              <%= f.text_area :comment, rows: '5', placeholder: "コメントをここに" %>
              <%= f.submit "送信する" %>
            <% end %>
          </div>
        </div>
        <% end %>
      <% end %>
    </div>
    <div>
      <% if params[:id] = current_member.id %>
        <%= link_to new_post_path do %>
          <buttun class="btn btn-success">新規投稿する</buttun>
        <% end %>
      <% end %>
    </div>

  </div>
</div>
</div>
<%= render 'public/shared/footer.html.erb' %>